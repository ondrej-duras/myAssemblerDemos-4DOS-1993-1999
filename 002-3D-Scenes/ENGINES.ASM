;ENGINES.ASM / ENGINES.COM - Modelovanie 3D vesmirnych zariadeni
;19991201, rtm. Ondrej DURAS (dury)


;pre kompilaciu bol pouzivany TASM v2.02 a TLINK v3.01
;=cc TASM.EXE ENGINES.ASM
;=cc TLINK.EXE ENGINES.OBJ,ENGINES.COM /t
;=cc DEL ENGINES.OBJ
;=cc DEL ENGINES.MAP


;HISTORICKA POZNAMKA:
; Toto 3D modelovanie bol asi tak technicky vrchol mojho assembleru v 20. storoci.
; Potom si uz okolnosti/praca vynutili programovanie v inych jazykoch.
; Assembler uz potom po statniciach ostal iba ako konzultacna
; zalezitost pre spoluziakov, ktori z necho potrebovali spravit skusku.
; Posledni inzinieri opustili akademiu v lete 2006. S nimi sa
; snad iba docasne skoncilo aj moje programovanie v assembleri.
; snad to raz prepisem pre Raspberry s vyuzitim jeho GPU ...

include SPACEFUL.INC
	mov camx,-100
	mov camy,-100
	mov camz,-500
	mov moviept,offset mscena

op1:	call pclear
	call stars
	call movie
	jnc dal1
	mov moviept,offset mscena
dal1:	call draw
	call video
	call kstop
	jmp op1

mscena	dw 120,0,mscena2		;prelet sputnikov
	dw dsput,-1100,-200,1000, 0,64,100, 1000,200,-700, 0,64,100
	dw dsput,-1150,-130,1000, 0,64,100, 1200,400,-700, 0,64,100
	dw dsput,-1150, -50,1000, 0,64,100, 1200,600,-700, 0,64,100
	dw -1

mscena2	dw 200,0,mscena3 ;predna letka	;prilet raketoplanov
	dw drplan,    0,-200,-1000, 0,128,-64,     0,-200,4000, 0,128,-64
	dw drplan, -500,-200,-1200, 0,128,-64,  -500,-200,3800, 0,128,-64
	dw drplan,  500,-200,-1200, 0,128,-64,   500,-200,3800, 0,128,-64
                        ;lava letka
	dw drplan,-1500, 150,-1300, 0,128,-64, -1500, 150,3700, 0,128,-64
	dw drplan,-2000, 150,-1500, 0,128,-64, -2000, 150,3500, 0,128,-64
	dw drplan,-1000, 150,-1500, 0,128,-64, -1000, 150,3500, 0,128,-64
                        ;prava letka
	dw drplan, 1500, 150,-1300, 0,128,-64,  1500, 150,3700, 0,128,-64
	dw drplan, 2000, 150,-1500, 0,128,-64,  2000, 150,3500, 0,128,-64
	dw drplan, 1000, 150,-1500, 0,128,-64,  1000, 150,3500, 0,128,-64

	dw drplan,    0, 300,-1300, 0,128,-64,     0, 300,3700, 0,128,-64
	dw drplan, -500, 300,-1500, 0,128,-64,  -500, 300,3500, 0,128,-64
	dw drplan,  500, 300,-1500, 0,128,-64,   500, 300,3500, 0,128,-64
	dw -1

mscena3	dw 50,0,mscena4	;predna letka	;natacanie raketoplanov
	dw drplan,    0,-200, 4000, 0,128,-64,     0,-900,4500,  64,128,-64
	dw drplan, -500,-200, 3800, 0,128,-64, -1600,-900,4300,  32,166,-64
	dw drplan,  500,-200, 3800, 0,128,-64,  1600,-900,4300,  32, 90,-64
                        ;lava letka
	dw drplan,-1500, 150, 3700, 0,128,-64, -2100, 800,4200,  32,190,-64
	dw drplan,-2000, 150, 3500, 0,128,-64, -2600,1100,4000,  32,210,-64
	dw drplan,-1000, 150, 3500, 0,128,-64, -1600, 500,4000,  32,180,-64
                        ;prava letka
	dw drplan, 1500, 150, 3700, 0,128,-64,  2100, 800,4200,  32, 66,-64
	dw drplan, 2000, 150, 3500, 0,128,-64,  2600,1100,4000,  32, 56,-64
	dw drplan, 1000, 150, 3500, 0,128,-64,  1600, 500,4000,  32, 86,-64

	dw drplan,    0, 300, 3700, 0,128,-64,     0,1300,4200, -64,128,-64
	dw drplan, -500, 300, 3500, 0,128,-64, -1600,1300,4000, -32, 90,-64
	dw drplan,  500, 300, 3500, 0,128,-64,  1600,1300,4000, -32,166,-64
	dw -1

mscena4	dw 40,0,mscena5	;predna letka	;odlet raketoplanov
	dw drplan,    0,-900, 4500, 64,128,-64,     0,-2500,5000,  64,128,-64
	dw drplan,-1600,-900, 4300, 32,166,-64, -3600,-2500,4800,  32,166,-64
	dw drplan, 1600,-900, 4300, 32, 90,-64,  3600,-2500,4800,  32, 90,-64
                        ;lava letka
	dw drplan,-2100, 800, 4200, 32,190,-64, -4100, -100,4700,  32,190,-64
	dw drplan,-2600,1100, 4000, 32,218,-64, -3600, 1600,4500,  32,210,-64
	dw drplan,-1600, 500, 4000, 32,180,-64, -3600,-1000,4500,  32,180,-64
                        ;prava letka
	dw drplan, 2100, 800, 4200, 32, 66,-64,  4100, -100,4700,  32, 66,-64
	dw drplan, 2600,1100, 4000, 32, 56,-64,  3600, 1600,4500,  32, 56,-64
	dw drplan, 1600, 500, 4000, 32, 86,-64,  3600,-1000,4500,  32, 86,-64

	dw drplan,    0,1300, 4200,-64,128,-64,     0, 2500,4700, -64,128,-64
	dw drplan,-1600,1300, 4000,-32, 90,-64, -3600, 2500,4500, -32, 90,-64
	dw drplan, 1600,1300, 4000,-32,166,-64,  3600, 2500,4500, -32,166,-64
	dw -1

mscena5	dw 200,0,mscena6 ;prichod sputnikov do polohy VA
	dw dsput,  350,-500,-500, 0,0,0, -550,-300,3500, 255*3,255*7,255*7 ;V
	dw dsput, -170, 700,-500, 0,0,0, -470,-100,3500, 255*2,255*7,255*6
	dw dsput, -490,-700,-500, 0,0,0, -390, 100,3500, 255*2,255*8,255*6
	dw dsput,  810,-900,-500, 0,0,0, -310, 300,3500, 255*1,255*4,255*3
	dw dsput, -230, 500,-500, 0,0,0, -230, 100,3500, 255*0,255*2,255*4
	dw dsput,  550,-700,-500, 0,0,0, -150,-100,3500, 255*4,255*9,255*6
	dw dsput, -270,-900,-500, 0,0,0,  -70,-300,3500, 255*8,255*1,255*5
	dw dsput, -530, 900,-500, 0,0,0,  130, 300,3500, 255*3,255*0,255*8 ;A
	dw dsput,  410,-500,-500, 0,0,0,  210, 100,3500, 255*8,255*5,255*1
	dw dsput,  790, 700,-500, 0,0,0,  290,-100,3500, 255*7,255*5,255*0
	dw dsput, -270,-900,-500, 0,0,0,  370,-300,3500, 255*6,255*7,255*7
	dw dsput, -450,-700,-500, 0,0,0,  450,-100,3500, 255*5,255*2,255*2
	dw dsput, -730, 500,-500, 0,0,0,  530, 100,3500, 255*5,255*9,255*1
	dw dsput,  410,-500,-500, 0,0,0,  610, 300,3500, 255*1,255*4,255*4
	dw dsput,  270,-700,-500, 0,0,0,  370, 100,3500, 255*0,255*9,255*8
	dw -1

mscena6	dw 200,0,mscena7 ;rotacia sputnikov v polohe VA
	dw dsput, -550,-300,3500, 0,0,0, -550,-300,500, 255*4,255*2,255*0 ;V
	dw dsput, -470,-100,3500, 0,0,0, -470,-100,500, 255*4,255*2,255*0
	dw dsput, -390, 100,3500, 0,0,0, -390, 100,500, 255*4,255*2,255*0
	dw dsput, -310, 300,3500, 0,0,0, -310, 300,500, 255*4,255*2,255*0
	dw dsput, -230, 100,3500, 0,0,0, -230, 100,500, 255*4,255*2,255*0
	dw dsput, -150,-100,3500, 0,0,0, -150,-100,500, 255*4,255*2,255*0
	dw dsput,  -70,-300,3500, 0,0,0,  -70,-300,500, 255*4,255*2,255*0
	dw dsput,  130, 300,3500, 0,0,0,  130, 300,500, 255*4,255*2,255*0 ;A
	dw dsput,  210, 100,3500, 0,0,0,  210, 100,500, 255*4,255*2,255*0
	dw dsput,  290,-100,3500, 0,0,0,  290,-100,500, 255*4,255*2,255*0
	dw dsput,  370,-300,3500, 0,0,0,  370,-300,500, 255*4,255*2,255*0
	dw dsput,  450,-100,3500, 0,0,0,  450,-100,500, 255*4,255*2,255*0
	dw dsput,  530, 100,3500, 0,0,0,  530, 100,500, 255*4,255*2,255*0
	dw dsput,  610, 300,3500, 0,0,0,  610, 300,500, 255*4,255*2,255*0
	dw dsput,  370, 100,3500, 0,0,0,  370, 100,500, 255*4,255*2,255*0
	dw dmir,  -900,-1500,2000, 0,0,0, 1300, 500,200, 0,255*2,255*1
	dw -1

mscena7	dw 200,0,mscena8	;odchod sputnikov v polohe VA
	dw dsput, -550,-300,500, 0,0,0,-1050, 900,-400, 255*3,255*7,255*7 ;V
	dw dsput, -470,-100,500, 0,0,0, 970, 700,-400, 255*2,255*7,255*6
	dw dsput, -390, 100,500, 0,0,0,-890,-400,-400, 255*2,255*8,255*6
	dw dsput, -310, 300,500, 0,0,0, 710, 650,-400, 255*1,255*4,255*3
	dw dsput, -230, 100,500, 0,0,0,-730, 450,-400, 255*0,255*2,255*4
	dw dsput, -150,-100,500, 0,0,0,-650,-900,-400, 255*4,255*9,255*6
	dw dsput,  -70,-300,500, 0,0,0,-570, 550,-400, 255*8,255*1,255*5
	dw dsput,  130, 300,500, 0,0,0,1230,-700,-400, 255*3,255*0,255*8 ;A
	dw dsput,  210, 100,500, 0,0,0,1510,-600,-400, 255*8,255*5,255*1
	dw dsput,  290,-100,500, 0,0,0,-990,-850,-400, 255*7,255*5,255*0
	dw dsput,  370,-300,500, 0,0,0, 870, 900,-400, 255*6,255*7,255*7
	dw dsput,  450,-100,500, 0,0,0,-750, 550,-400, 255*5,255*2,255*2
	dw dsput,  530, 100,500, 0,0,0,1030,-950,-400, 255*5,255*9,255*1
	dw dsput,  610, 300,500, 0,0,0,1110,-950,-400, 255*1,255*4,255*4
	dw dsput,  370, 100,500, 0,0,0,-870, 700,-400, 255*0,255*9,255*8
	dw -1
mscena8 dw 200,0,mscena9	;prichod miru
	dw dmir,   900,-800, 500, 0,0,0, 0,0,0, 255,0,255*4
	dw -1
mscena9	dw 200,0,mscena10	;prehliadka miru
	dw dmir, 0,0,0, 0,0,0, 0,0,0, 255,255*2,255*4
	dw -1
mscena10 dw 200,0,mscena11		;odchod miru
	dw dmir, 0,0,0, 0,0,0, -900,800,-200, 255,0,255*4
	dw -1
mscena11 dw 200,0,mscena12	;nalietavanie sputnikov do polohy LM
	dw dsput,  850, 500,-400, 0,0,0, -550,-300,500, 255*1,255*2,255*1  ;L
	dw dsput, -750, 600,-400, 0,0,0, -550,-100,500, 255*2,255*8,255*1
	dw dsput, -950,-600,-400, 0,0,0, -550, 100,500, 255*1,255*8,255*2
	dw dsput,  950,-400,-400, 0,0,0, -550, 300,500, 255*3,255*8,255*2
	dw dsput,  500, 400,-400, 0,0,0, -350, 300,500, 255*4,255*7,255*4
	dw dsput, -850, 600,-400, 0,0,0, -150, 300,500, 255*5,255*4,255*4
	dw dsput, -600,-700,-400, 0,0,0,  200,-300,500, 255*3,255*4,255*7  ;M
	dw dsput, -400, 600,-400, 0,0,0,  200,-100,500, 255*4,255*5,255*6
	dw dsput,  300,-500,-400, 0,0,0,  200, 100,500, 255*7,255*6,255*6
	dw dsput,  600,-500,-400, 0,0,0,  200, 300,500, 255*8,255*7,255*3
	dw dsput, -600,-700,-400, 0,0,0,  700,-300,500, 255*6,255*2,255*3  
	dw dsput, -800, 900,-400, 0,0,0,  700,-100,500, 255*2,255*3,255*3
	dw dsput,  900, 900,-400, 0,0,0,  700, 100,500, 255*3,255*3,255*1
	dw dsput, -900,-500,-400, 0,0,0,  700, 300,500, 255*7,255*1,255*1
	dw dsput,  650,-600,-400, 0,0,0,  450,-100,500, 255*9,255*8,255*1
	dw -1
mscena12 dw 200,0,mscena13	;sputniky rotujuce v polohe LM
	dw -2,    -100,-100,-500, 0,0,0, -100,-100,-500, 255,0,0
	dw dsput, -550,-300,500, 0,0,0, -550,-300,3500, 255*3,0,255*2    ;L
	dw dsput, -550,-100,500, 0,0,0, -550,-100,3500, 255*3,0,255*2
	dw dsput, -550, 100,500, 0,0,0, -550, 100,3500, 255*3,0,255*2
	dw dsput, -550, 300,500, 0,0,0, -550, 300,3500, 255*3,0,255*2
	dw dsput, -350, 300,500, 0,0,0, -350, 300,3500, 255*3,0,255*2
	dw dsput, -150, 300,500, 0,0,0, -150, 300,3500, 255*3,0,255*2
	dw dsput,  200,-300,500, 0,0,0,  200,-300,3500, 255*3,0,255*2    ;M
	dw dsput,  200,-100,500, 0,0,0,  200,-100,3500, 255*3,0,255*2
	dw dsput,  200, 100,500, 0,0,0,  200, 100,3500, 255*3,0,255*2
	dw dsput,  200, 300,500, 0,0,0,  200, 300,3500, 255*3,0,255*2
	dw dsput,  700,-300,500, 0,0,0,  700,-300,3500, 255*3,0,255*2
	dw dsput,  700,-100,500, 0,0,0,  700,-100,3500, 255*3,0,255*2
	dw dsput,  700, 100,500, 0,0,0,  700, 100,3500, 255*3,0,255*2
	dw dsput,  700, 300,500, 0,0,0,  700, 300,3500, 255*3,0,255*2
	dw dsput,  450,-100,500, 0,0,0,  450,-100,3500, 255*3,0,255*2
	dw -1
mscena13 dw 200,0,mscena14	;sputniky opustajuce polohu LM
	dw dsput, -550,-300,3500, 0,0,0, -3550,-3300,3800, 255*3,0,255*2    ;L
	dw dsput, -550,-100,3500, 0,0,0,  3550, 3100,2700, 255*3,0,255*2
	dw dsput, -550, 100,3500, 0,0,0, -3550, 3100,3600, 255*3,0,255*2
	dw dsput, -550, 300,3500, 0,0,0,  3550,  300,2500, 255*3,0,255*2
	dw dsput, -350, 300,3500, 0,0,0, -3350,-3300,2000, 255*3,0,255*2
	dw dsput, -150, 300,3500, 0,0,0,  3150,-3300,3000, 255*3,0,255*2
	dw dsput,  200,-300,3500, 0,0,0, -3200, -300,4000, 255*3,0,255*2    ;M
	dw dsput,  200,-100,3500, 0,0,0,   200, 3100,5500, 255*3,0,255*2
	dw dsput,  200, 100,3500, 0,0,0,  -100,-3100,4500, 255*3,0,255*2
	dw dsput,  200, 300,3500, 0,0,0, -3200, -300,3000, 255*3,0,255*2
	dw dsput,  700,-300,3500, 0,0,0,  3700, 3300,3300, 255*3,0,255*2
	dw dsput,  700,-100,3500, 0,0,0, -3700, 3100,3500, 255*3,0,255*2
	dw dsput,  700, 100,3500, 0,0,0,  3700,-3100,3500, 255*3,0,255*2
	dw dsput,  700, 300,3500, 0,0,0, -3700, -700,4500, 255*3,0,255*2
	dw dsput,  450,-100,3500, 0,0,0,  -450, 3100,2500, 255*3,0,255*2
	dw dmir, -1500,   0, 100, 128,0,0,1500,    0, 100,   128,255,0
	dw -1
mscena14 dw 200,0,-1	;vracajuce sa raketoplany
	dw drplan, 1500,-400,1000, 128,0,-40, -1000,400,-200, 128,0,-40
	dw drplan, 2300,-500,1300, 128,0,-40, -1400,300, 300, 128,0,-40
	dw drplan, 3100,-200,1300, 128,0,-40, -2400,600, 400, 128,0,-40
	dw -1
include ENGINES.INC
;include oznak.ida
spacend
